version: '3.8'

services:
  discord-bot:
    build: .
    container_name: discord-bot
    restart: unless-stopped
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - GUILD_ID=${GUILD_ID:-}
    # Alternatively, use env_file:
    # env_file:
    #   - .env

    # For development with hot reload, uncomment:
    # volumes:
    #   - .:/app
    # command: go run ./cmd/bot

  # Development version with hot reload using air
  discord-bot-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: discord-bot-dev
    restart: unless-stopped
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - GUILD_ID=${GUILD_ID:-}
    volumes:
      - .:/app
    profiles:
      - dev
